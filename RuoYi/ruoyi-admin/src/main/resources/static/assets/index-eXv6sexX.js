import{d as E,P as A,U as O,Y as i,p as U,w as ae,r as g,a4 as ye,e as V,V as xe,W as Ae,K as u,F as Oe,Z as ze,l as Ie,G as Le,Q as f,O as m,c as Se,a2 as $e,a3 as Ee}from"./vue-6vVOMWIH.js";import{r as ue,q as ce,_ as Re}from"./index-HGNoVnDI.js";import{x as ke,o as Ne,m as De,y as Ce,n as Te,t as je,q as Pe,p as Ue,A as Ve,B as He,w as Be,C as Me}from"./naiveui-SbPc-cqz.js";const Ge={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},We=i("g",{fill:"none"},[i("path",{d:"M16.142 4.81l-1.14-1.18V17.5a.5.5 0 1 1-1 0V3.626L12.86 4.809a.5.5 0 0 1-.72-.694l1.821-1.886a.75.75 0 0 1 1.08 0l1.82 1.886a.5.5 0 1 1-.72.694zM5 3a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h6.5a.5.5 0 0 0 0-1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h4.5a.5.5 0 0 0 0-1H5z",fill:"currentColor"})],-1),Fe=[We],Ke=E({name:"ArrowAutofitUp20Regular",render:function(t,n){return A(),O("svg",Ge,Fe)}}),qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},Ye=i("g",{fill:"none"},[i("path",{d:"M3.09 6H5.5a.5.5 0 0 0 0-1H4a5 5 0 1 1-.98 3.455a.5.5 0 1 0-.995.09A6 6 0 1 0 3.5 4.03V3a.5.5 0 0 0-1 0v2.5A.5.5 0 0 0 3 6h.09zM7.5 5a.5.5 0 0 1 .5.5V8h1.5a.5.5 0 1 1 0 1h-2a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5z",fill:"currentColor"})],-1),Xe=[Ye],Ze=E({name:"History16Regular",render:function(t,n){return A(),O("svg",qe,Xe)}}),Qe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Je=i("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),et=i("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),tt=i("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1),nt=[Je,et,tt],ot=E({name:"CreateOutline",render:function(t,n){return A(),O("svg",Qe,nt)}});function rt(e){return xe()?(Ae(e),!0):!1}const de=typeof window<"u";function st(e,t){function n(...o){e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})}return n}function it(e,t={}){let n,o;return l=>{const s=u(e),a=u(t.maxWait);if(n&&clearTimeout(n),s<=0||a!==void 0&&a<=0)return o&&(clearTimeout(o),o=null),l();a&&!o&&(o=setTimeout(()=>{n&&clearTimeout(n),o=null,l()},a)),n=setTimeout(()=>{o&&clearTimeout(o),o=null,l()},s)}}function lt(e,t=200,n={}){return st(it(t,n),e)}function at(e){var t;const n=u(e);return(t=n==null?void 0:n.$el)!=null?t:n}const ut=de?window:void 0,W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__";W[F]=W[F]||{};var K=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ft=(e,t)=>{var n={};for(var o in e)ct.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&K)for(var o of K(e))t.indexOf(o)<0&&dt.call(e,o)&&(n[o]=e[o]);return n};function _t(e,t,n={}){const o=n,{window:r=ut}=o,l=ft(o,["window"]);let s;const a=r&&"ResizeObserver"in r,_=()=>{s&&(s.disconnect(),s=void 0)},c=ae(()=>at(e),p=>{_(),a&&r&&p&&(s=new ResizeObserver(t),s.observe(p,l))},{immediate:!0,flush:"post"}),w=()=>{_(),c()};return rt(w),{isSupported:a,stop:w}}var q,Y;de&&(window!=null&&window.navigator)&&((q=window==null?void 0:window.navigator)!=null&&q.platform)&&/iP(ad|hone|od)/.test((Y=window==null?void 0:window.navigator)==null?void 0:Y.platform);const mt=({breakpoints:e,wrapperWidth:t,gutter:n,hasAroundGutter:o,initWidth:r})=>{const l=Object.keys(e).map(c=>Number(c)).sort((c,w)=>c-w);let s=t,a=!1;for(const c of l)if(t<=c){s=c,a=!0;break}if(!a)return r;const _=e[s].rowPerView;return o?(t-n)/_-n:(t-(_-1)*n)/_};function gt(e){const t=g(0),n=g(null);_t(n,s=>{const a=s[0],{width:_}=a.contentRect;t.value=_});const o=V(()=>mt({wrapperWidth:t.value,breakpoints:e.breakpoints,gutter:e.gutter,hasAroundGutter:e.hasAroundGutter,initWidth:e.width})),r=V(()=>{const s=e.hasAroundGutter?-e.gutter:e.gutter;return Math.floor((t.value+s)/(o.value+e.gutter))}),l=V(()=>{if(e.align==="left")return 0;if(e.align==="center"){const s=e.hasAroundGutter?e.gutter:-e.gutter,a=r.value*(o.value+e.gutter)+s;return(t.value-a)/2}else{const s=e.hasAroundGutter?e.gutter:-e.gutter,a=r.value*(o.value+e.gutter)+s;return t.value-a}});return{waterfallWrapper:n,wrapperWidth:t,colWidth:o,cols:r,offsetX:l}}function fe(e,t){return new RegExp(`(^|\\s)${t}(\\s|$)`).test(e.className)}function X(e,t){if(fe(e,t))return;const n=e.className.split(/\s+/);n.push(t),e.className=n.join(" ")}const ht=document.createElement("div").style,H=(()=>{const e={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(const t in e){const n=e[t];if(ht[n]!==void 0)return t}return!1})();function N(e){return H===!1?!1:H==="standard"?e:H+e.charAt(0).toUpperCase()+e.substr(1)}const Z=N("transform"),Q=N("animation-duration"),J=N("animation-delay"),ee=N("transition"),te=N("animation-fill-mode");function pt(e,t,n,o,r){const l=g([]),s=g(0),a=p=>{const d=e.hasAroundGutter?p+1:p;return e.gutter*d+t.value*p+o.value},_=()=>{l.value=new Array(n.value).fill(e.hasAroundGutter?e.gutter:0)},c=vt(e);return{wrapperHeight:s,layoutHandle:async()=>{_();const p=[];if(r&&r.value&&r.value.childNodes.forEach(d=>{d.className==="waterfall-item"&&p.push(d)}),p.length===0)return!1;for(let d=0;d<p.length;d++){const y=p[d],I=Math.min.apply(null,l.value),L=l.value.indexOf(I),T=a(L),R=y.style;Z&&(R[Z]=`translate3d(${T}px,${I}px, 0)`),R.width=`${t.value}px`;const{height:j}=y.getBoundingClientRect();l.value[L]+=j+e.gutter,c(y,()=>{const P=e.animationDuration/1e3;ee&&(R[ee]=`transform ${P}s`)})}s.value=Math.max.apply(null,l.value)}}}function vt(e){return(t,n)=>{const o=t.firstChild;if(o&&!fe(o,e.animationPrefix)){const r=`${e.animationDuration/1e3}s`,l=`${e.animationDelay/1e3}s`,s=o.style;s.visibility="visible",Q&&(s[Q]=r),J&&(s[J]=l),te&&(s[te]="both"),X(o,e.animationPrefix),X(o,e.animationEffect),n&&setTimeout(()=>{n()},e.animationDuration+e.animationDelay)}}}const wt=typeof window<"u"&&window!==null,ne=xt(),bt=Object.prototype.propertyIsEnumerable,oe=Object.getOwnPropertySymbols;function yt(e,...t){return t.map(o=>o.replace(/\[(\w+)\]/g,".$1").split(".").reduce((r,l)=>r&&r[l],e))}function xt(){return wt&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function k(e){return typeof e=="function"||toString.call(e)==="[object Object]"}function At(e){return typeof e=="object"?e===null:typeof e!="function"}function Ot(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"}function zt(e,...t){if(!k(e))throw new TypeError("expected the first argument to be an object");if(t.length===0||typeof Symbol!="function"||typeof oe!="function")return e;for(const n of t){const o=oe(n);for(const r of o)bt.call(n,r)&&(e[r]=n[r])}return e}function _e(e,...t){let n=0;for(At(e)&&(e=t[n++]),e||(e={});n<t.length;n++)if(k(t[n])){for(const o of Object.keys(t[n]))Ot(o)&&(k(e[o])&&k(t[n][o])?_e(e[o],t[n][o]):e[o]=t[n][o]);zt(e,t[n])}return e}function re(e,t){return new Promise((n,o)=>{const r=new Image;r.onload=()=>{n(r)},r.onerror=()=>{o(new Error("Image load error"))},t&&(r.crossOrigin="Anonymous"),r.src=e})}var $;(function(e){e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"})($||($={}));const It={rootMargin:"0px",threshold:0},se="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Lt="";class St{constructor(t=!0,n,o=!0){this.lazyActive=!0,this.crossOrigin=!0,this.options={loading:se,error:Lt,observerOptions:It,log:!0},this._images=new WeakMap,this.lazyActive=t,this.crossOrigin=o,this.config(n)}config(t={}){_e(this.options,t)}mount(t,n,o){const{src:r,loading:l,error:s}=this._valueFormatter(n);t.setAttribute("lazy",$.LOADING),t.setAttribute("src",l||se),this.lazyActive?(ne||(this._setImageSrc(t,r,o,s),this._log(()=>{throw new Error("Not support IntersectionObserver!")})),this._initIntersectionObserver(t,r,o,s)):this._setImageSrc(t,r,o,s)}resize(t,n){const o=t.getAttribute("lazy"),r=t.getAttribute("src");o&&o===$.LOADED&&r&&re(r,this.crossOrigin).then(l=>{const{width:s,height:a}=l,_=t.width/s*a;t.height=_;const c=t.style;c.height=`${_}px`,n()})}unmount(t){const n=this._realObserver(t);n&&n.unobserve(t),this._images.delete(t)}_setImageSrc(t,n,o,r){!n||t.getAttribute("src")===n||re(n,this.crossOrigin).then(s=>{const{width:a,height:_}=s,c=_/a,w=t.parentNode.parentNode;w.style.paddingBottom=`${c*100}%`,t.setAttribute("lazy",$.LOADED),t.removeAttribute("src"),t.setAttribute("src",n),o(!0)}).catch(()=>{const s=this._realObserver(t);s&&s.disconnect(),r&&(t.setAttribute("lazy",$.ERROR),t.setAttribute("src",r),o(!1)),this._log(()=>{throw new Error(`Image failed to load!And failed src was: ${n} `)})})}_isOpenLazy(){return ne&&this.lazyActive}_initIntersectionObserver(t,n,o,r){const l=this.options.observerOptions;this._images.set(t,new IntersectionObserver(a=>{Array.prototype.forEach.call(a,_=>{if(_.isIntersecting){const c=this._realObserver(t);c&&c.unobserve(_.target),this._setImageSrc(t,n,o,r)}})},l));const s=this._realObserver(t);s&&s.observe(t)}_valueFormatter(t){let n=t,o=this.options.loading,r=this.options.error;return k(t)&&(n=t.src,o=t.loading||this.options.loading,r=t.error||this.options.error),{src:n,loading:o,error:r}}_log(t){this.options.log&&t()}_realObserver(t){return this._images.get(t)}}var $t=(e,t)=>{for(const[n,o]of t)e[n]=o;return e};const B=E({props:{list:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},imgSelector:{type:String,default:"src"},width:{type:Number,default:200},breakpoints:{type:Object,default:()=>({1200:{rowPerView:3},800:{rowPerView:2},500:{rowPerView:1}})},gutter:{type:Number,default:10},hasAroundGutter:{type:Boolean,default:!0},animationPrefix:{type:String,default:"animate__animated"},animationEffect:{type:String,default:"fadeIn"},animationDuration:{type:Number,default:1e3},animationDelay:{type:Number,default:300},backgroundColor:{type:String,default:"#fff"},lazyload:{type:Boolean,default:!0},loadProps:{type:Object,default:()=>{}},crossOrigin:{type:Boolean,default:!0},delay:{type:Number,default:300},align:{type:String,default:"center"}},setup(e){const t=new St(e.lazyload,e.loadProps,e.crossOrigin);U("lazy",t);const{waterfallWrapper:n,wrapperWidth:o,colWidth:r,cols:l,offsetX:s}=gt(e),{wrapperHeight:a,layoutHandle:_}=pt(e,r,l,s,n),c=lt(()=>{_()},e.delay);ae(()=>[o,r,e.list],()=>{o.value>0&&c()},{deep:!0});const w=g(0);return U("sizeChangeTime",w),U("imgLoaded",c),{waterfallWrapper:n,wrapperHeight:a,getRenderURL:y=>yt(y,e.imgSelector)[0],getKey:(y,I)=>y[e.rowKey]||I,renderer:c}}}),ie=()=>{ye(e=>({b75bd1b4:e.backgroundColor}))},le=B.setup;B.setup=le?(e,t)=>(ie(),le(e,t)):ie;const Et=B,Rt={class:"waterfall-card"};function kt(e,t,n,o,r,l){return A(),O("div",{ref:"waterfallWrapper",class:"waterfall-list",style:Le({height:`${e.wrapperHeight}px`})},[(A(!0),O(Oe,null,ze(e.list,(s,a)=>(A(),O("div",{key:e.getKey(s,a),class:"waterfall-item"},[i("div",Rt,[Ie(e.$slots,"item",{item:s,index:a,url:e.getRenderURL(s)},void 0,!0)])]))),128))],4)}var Nt=$t(Et,[["render",kt],["__scopeId","data-v-6a0e9c4c"]]);const Dt=e=>ue({url:"/chat/dallE3",method:"post",data:ce.stringify(e)}),Ct=e=>ue({url:"/chat/dallE3List",method:"post",data:ce.stringify(e)}),Tt=""+new URL("boy-rbKlC3G6.png",import.meta.url).href,jt=""+new URL("main-wFbY6Awu.png",import.meta.url).href,Pt=""+new URL("yuhangyuan-ZLZUkcdc.png",import.meta.url).href,Ut=""+new URL("carton_boy-Vhk4y6Hg.png",import.meta.url).href,Vt=""+new URL("girl-KKqXbd1M.png",import.meta.url).href,C=e=>($e("data-v-b9ac21aa"),e=e(),Ee(),e),Ht={class:"overflow-hidden"},Bt=C(()=>i("div",{class:"flex items-center justify-center h-[100px] text-4xl"},"DALL-E3",-1)),Mt={class:"tab"},Gt={class:"tab-title"},Wt=C(()=>i("span",null,"创建绘画",-1)),Ft={class:"case lg:flex lg:justify-between xl:w-[1440px] xl:mx-auto xl:my-0"},Kt={class:"left lg:w-[70%]"},qt={class:"md:flex w-full xl:flex lg:h-full"},Yt={class:"md:mr-[10px] md:w-[50%] xl:w-[50%] lg:hidden xl:block"},Xt=["src"],Zt={class:"mt-[10px] md:w-[50%] lg:w-full xl:w-[50%] xl:grid md:mt-0 grid grid-cols-2 gap-[10px]"},Qt=["src"],Jt={class:""},en=["src"],tn=["src"],nn={class:""},on=["src"],rn=C(()=>i("div",null,null,-1)),sn={class:"right lg:w-[25%]"},ln={class:"my-[20px] lg:mt-0"},an={class:"h-[250px]"},un={class:"mb-[20px]"},cn={class:""},dn={class:"w-full"},fn={class:"tab-title"},_n=C(()=>i("span",null,"历史记录",-1)),mn=E({__name:"index",setup(e){g(1);const t=ke();g("https://07akioni.oss-cn-beijing.aliyuncs.com/07akioni.jpeg");const n=g(null),o=g(null);let r=g(1),l=g(50),s=g(1),a=g(1),_=g(10),c=g(!1),w=g([]),p=g(null),d=g({model:"1",size:"1",imgNumber:1,description:""}),y={imgNumber:{required:!0,type:"number",trigger:["blur"],message:"数量不能为空"},description:{required:!0,trigger:["blur"],message:"生成图片的描述词不能为空"}},I=g([{label:"DALL.E2",value:"1"},{label:"DALL.E3",value:"2"}]),L=g([{label:"256x256",value:"1"},{label:"512x512",value:"2"},{label:"1024x1024",value:"3"}]);function T(){var v;(v=n.value)==null||v.renderer()}function R(v){console.log(v),v==1&&(_.value=10,d.value.size="1",L.value=[{label:"256x256",value:"1"},{label:"512x512",value:"2"},{label:"1024x1024",value:"3"}]),v==2&&(_.value=1,d.value.imgNumber=1,d.value.size="3",L.value=[{label:"1024x1024",value:"3",disabled:!0},{label:"1792x1024",value:"4",disabled:!0},{label:"1024x1792",value:"5",disabled:!0}])}function j(v){var h;v.preventDefault(),c.value=!0,(h=p.value)==null||h.validate(b=>{if(b)c.value=!1;else{let S={model:d.value.model,size:d.value.size,prompt:d.value.description,n:d.value.imgNumber};Dt(S).then(z=>{console.log("res",z),c.value=!1,z.code!=500?t.create({title:"生成绘画任务成功",content:"请注意，创建的绘画任务，请稍等一会儿去历史记录查看，任务已经生成，生成需要几分钟，请耐心等待一下",meta:"AI绘画",duration:5e3}):t.create({title:"系统错误，请稍后重试",duration:5e3})})}})}function P(v){console.log(v),v=="history"&&(r.value=1,l.value=50,w.value=[],M())}function M(){let v={pageNum:r.value,pageSize:l.value};Ct(v).then(h=>{var b;w.value=w.value.concat(h.rows),s.value=Math.ceil(h.total/50),(b=o.value)==null||b.addEventListener("scroll",me)})}function me(v){var h=o.value.scrollHeight,b=o.value.scrollTop,S=o.value.clientHeight;if(h-S==b){if(r.value>=s.value)return;r.value++,M()}}return(v,h)=>{const b=Ne,S=De,z=Ce,ge=Te,D=je,he=Pe,pe=Ue,ve=Ve,G=He,we=Be,be=Me;return A(),O("div",Ht,[Bt,i("div",Mt,[f(be,{animated:"",size:"large","justify-content":"center","onUpdate:value":P},{default:m(()=>[f(G,{name:"create"},{tab:m(()=>[i("div",Gt,[f(b,{class:"icon",size:"30"},{default:m(()=>[f(u(ot))]),_:1}),Wt])]),default:m(()=>[f(D,null,{default:m(()=>[i("div",Ft,[i("div",Kt,[i("div",qt,[i("div",Yt,[i("img",{class:"w-full h-full rounded-lg",src:u(Pt)},null,8,Xt)]),i("div",Zt,[i("div",null,[i("img",{class:"w-full h-full rounded-lg",src:u(Tt)},null,8,Qt)]),i("div",Jt,[i("img",{class:"w-full h-full rounded-lg",src:u(jt)},null,8,en)]),i("div",null,[i("img",{class:"w-full h-full rounded-lg",src:u(Ut)},null,8,tn)]),i("div",nn,[i("img",{class:"w-full h-full rounded-lg",src:u(Vt)},null,8,on)])])]),rn]),i("div",sn,[f(ve,{ref_key:"formRef",ref:p,"label-placement":"top","label-width":80,model:u(d),rules:u(y)},{default:m(()=>[i("div",ln,[f(D,null,{default:m(()=>[i("div",an,[f(z,{label:"模型",path:"model"},{default:m(()=>[f(S,{value:u(d).model,"onUpdate:value":[h[0]||(h[0]=x=>u(d).model=x),R],options:u(I)},null,8,["value","options"])]),_:1}),f(z,{label:"图片尺寸",path:"size"},{default:m(()=>[f(S,{value:u(d).size,"onUpdate:value":h[1]||(h[1]=x=>u(d).size=x),options:u(L)},null,8,["value","options"])]),_:1}),f(z,{label:"图片数量",path:"imgNumber"},{default:m(()=>[f(ge,{value:u(d).imgNumber,"onUpdate:value":h[2]||(h[2]=x=>u(d).imgNumber=x),clearable:"",min:u(a),max:u(_)},null,8,["value","min","max"])]),_:1})])]),_:1})]),i("div",un,[f(D,null,{default:m(()=>[i("div",cn,[f(z,{label:"图片描述",path:"description"},{default:m(()=>[f(he,{value:u(d).description,"onUpdate:value":h[3]||(h[3]=x=>u(d).description=x),type:"textarea",placeholder:"图片的描述词",maxlength:"800",size:"large","show-count":""},null,8,["value"])]),_:1})])]),_:1})]),i("div",dn,[f(pe,{loading:u(c),color:"#8a2be2",block:!0,round:"",onClick:j},{icon:m(()=>[f(b,null,{default:m(()=>[f(u(Ke))]),_:1})]),default:m(()=>[Se(" 提交绘画任务 ")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])])])]),_:1})]),_:1}),f(G,{name:"history"},{tab:m(()=>[i("div",fn,[f(b,{class:"icon",size:"30"},{default:m(()=>[f(u(Ze))]),_:1}),_n])]),default:m(()=>[i("div",{id:"scroll__list",ref_key:"scroll__list2",ref:o},[f(u(Nt),{ref_key:"waterfall",ref:n,list:u(w)},{item:m(({item:x})=>[f(D,{hoverable:"",class:"card"},{default:m(()=>[f(we,{onLoad:h[4]||(h[4]=hn=>T()),src:x.url},null,8,["src"])]),_:2},1024)]),_:1},8,["list"])],512)]),_:1})]),_:1})])])}}}),gn=Re(mn,[["__scopeId","data-v-b9ac21aa"]]),bn=E({__name:"index",setup(e){return(t,n)=>(A(),O("div",null,[f(u(gn))]))}});export{bn as default};
